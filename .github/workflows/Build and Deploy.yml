name: Deploy Angular Project to GitHub Pages

on: [push]
#jobs:
 # build-and-deploy:
  #  concurrency: ci-${{ github.ref }} # Recommended if you intend to make multiple deployments in quick succession.

permissions:
  contents: read
  pages: write
  id-token: write

env:
  GITHUB_TOKEN: ${{secrets.ACCESS_TOKEN_SECRET }}

concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  buid:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Set up Node.js
        uses: actions/setup-node@v2
        with:
          node-version: 16

   jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: All things angular
      uses: cejas1719/OurNewApp-Group1@1 # AhsanAyaz/angular-deploy-gh-pages-actions@3 ## replace by latest version without it you will see Expected format {org}/{repo}[/path]@ref. Actual 'AhsanAyaz/angular-deploy-gh-pages-actions',Input string was not in a correct format.
      with:
        github_access_token: ${{ env.ACCESS_TOKEN_SECRET }} # see the Configuration section for how you can create secrets
        build_configuration: production # The build environment for the app. please look configurations in your angular.json
        base_href: https://cejas1719.github.io/OurNewApp-Group1/   # make sure this corresponds to https://<your_username>.github.io/<base_href>/
        deploy_branch: gh-pages # The branch the action should deploy to.
        angular_dist_build_folder: dist/OurNewApp-Group1 # The folder where your project is supposed to be after running ng build






      # - name: Print ACCESS_TOKEN_SECRET
      #   run: echo "ACCESS_TOKEN_SECRET is ${{ secrets.ACCESS_TOKEN_SECRET }}"

      # - name: Print GITHUB_TOKEN
      #   run: echo "GITHUB_TOKEN is ${{ env.GITHUB_TOKEN }}"
      
      # - name: Deploy to Gitpages
      #   uses: JamesIves/github-pages-deploy-action@releases/v3
      #   with:
      #     ACCESS_TOKEN: ${{ env.ACCESS_TOKEN_SECRET }}
      #     BRANCH: gh-pages
      #     FOLDER: dis